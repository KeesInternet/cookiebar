<?php
use Drupal\block_content\Entity\BlockContent;
use Drupal\block\Entity\Block;
use Drupal\node\Entity\Node;

/**
 * Implement hook_theme()
 * This function tells each theme what variables they can use
 * Changes Require chache clear
 *
 * @param unknown $existing
 * @param unknown $type
 * @param unknown $theme
 * @param unknown $path
 * @return array
 */
function kees_cookiebar_theme($existing, $type, $theme, $path) {

    return array(
        'kees_cookiebar' => array(
            'variables' => array(
                'isCookie' => NULL,
                'label' => NULL,
                'text' => NULL,
                'accept_button_text' => NULL,
                'decline_button_text' => NULL,
            ),
        ),
        'kees_cookiebar_accepted' => array(
            'variables' => array(
                'isCookie' => NULL,
                'label' => NULL,
                'text' => NULL,
                'accept_button_text' => NULL,
                'decline_button_text' => NULL,
            ),
        ),
        'kees_radioblock' => array(
            'variables' => array(
                'cookieValue' => NULL,
            ),
        ),
        'kees_cookiesPage' => array(
            'variables' => array(
                'cookieValue' => NULL,
                'title' => NULL,
                'intro' => NULL,
                'text' => NULL,
                'accept_button_text' => NULL,
                'decline_button_text' => NULL,
            ),
        ),
    );
}

/**
 * Implement hook_install()
 * Will Add a block to content of current theme when installing the plugin
 *
 * @return void
 */
function kees_cookiebar_install() {
    // Add block to content on module install
    $cookiebarBlock = Block::create([
        'id' => 'kees_cookiebar_block',
        'plugin' => 'kees_cookiebar_block',
        'region' => 'content',
        'weight' => 99,
        'theme' => \Drupal::config('system.theme')->get('default'),
        'settings' => [
            'label' => 'KeesTM Cookiebar Block',
            'label_display' => FALSE,
        ],
    ]);
    $cookiebarBlock->save();
}
